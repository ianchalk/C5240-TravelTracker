import{a as G}from"./chunk-KD2BGZMJ.js";import{a as te}from"./chunk-W47LT6C7.js";import{a as $,b as U,c as h,d as L,e as R,f as z,i as q,j as Y,k as B,l as K,m as H,n as W,o as J,q as Q,r as X,t as Z,u as S}from"./chunk-IDORQ526.js";import{Da as j,H as a,Ia as ee,J as C,K as k,O as f,R as c,T as x,U as s,V as r,W as p,X as P,Y as v,Z as m,a as A,b as E,ba as l,c as y,ca as w,d as T,da as _,l as F,m as O,n as D,ra as M,sa as I,va as V,w as g,x as b,za as N}from"./chunk-2RWO4YJT.js";function ne(o,t){if(o&1&&(s(0,"div",13),p(1,"i",14),l(2," Creating trip as: "),s(3,"strong"),l(4),r(),l(5),r()),o&2){let e=m();a(4),w(e.currentUser.name),a(),_(" (",e.currentUser.email,") ")}}function re(o,t){o&1&&(s(0,"div",15),p(1,"i",16),s(2,"strong"),l(3,"Authentication Required:"),r(),l(4," You must be signed in to add a new trip. Redirecting you back to the trips page... "),r())}function oe(o,t){o&1&&(s(0,"div",17),p(1,"i",18),s(2,"strong"),l(3,"Success!"),r(),l(4," Your trip has been created successfully. Redirecting to trips page... "),r())}function ae(o,t){if(o&1){let e=P();s(0,"div",19),p(1,"i",20),s(2,"strong"),l(3,"Error:"),r(),l(4),s(5,"button",21),v("click",function(){g(e);let i=m();return b(i.submitError="")}),r()()}if(o&2){let e=m();a(4),_(" ",e.submitError," ")}}function se(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m(2);a(),_(" ",e.getFieldError("name")," ")}}function de(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m(2);a(),_(" ",e.getFieldError("description")," ")}}function le(o,t){if(o&1){let e=P();s(0,"button",81),v("click",function(){g(e);let i=m().index,d=m(2);return b(d.removePlace(i))}),p(1,"i",82),r()}}function ce(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"name")," ")}}function me(o,t){if(o&1){let e=P();s(0,"div",85),v("mousedown",function(){let i=g(e).$implicit,d=m(2).index,u=m(2);return b(u.selectPrediction(d,i))})("mouseenter",function(){let i=g(e).index,d=m(2).index,u=m(2);return b(u.selectedPredictionIndex[d]=i)}),s(1,"div",86),l(2),r(),s(3,"div",87),l(4),r()()}if(o&2){let e=t.$implicit,n=t.index,i=m(2).index,d=m(2);x("active",n===d.selectedPredictionIndex[i]),a(2),w(e.structured_formatting.main_text),a(2),w(e.structured_formatting.secondary_text)}}function pe(o,t){if(o&1&&(s(0,"div",83),f(1,me,5,4,"div",84),r()),o&2){let e=m().index,n=m(2);a(),c("ngForOf",n.addressPredictions[e])}}function ue(o,t){o&1&&(s(0,"div",88)(1,"div",89)(2,"span",90),l(3,"Loading..."),r()()())}function fe(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"address")," ")}}function _e(o,t){if(o&1&&(s(0,"div",91)(1,"div",92),p(2,"i",40),s(3,"strong"),l(4,"Selected:"),r(),l(5),r()()),o&2){let e=m().index,n=m(2);a(5),_(" ",n.selectedAddresses[e].formatted_address," ")}}function ge(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"startDate")," ")}}function be(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"endDate")," ")}}function he(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"cost")," ")}}function ve(o,t){if(o&1){let e=P();s(0,"div",95),p(1,"i",96),l(2),s(3,"button",97),v("click",function(){let i=g(e).index,d=m(2).index,u=m(2);return b(u.removePhoto(d,i))}),r()()}if(o&2){let e=t.$implicit,n=m(4);a(2),_(" ",n.getPhotoName(e)," ")}}function xe(o,t){if(o&1&&(s(0,"div",91)(1,"div",93),f(2,ve,4,1,"div",94),r()()),o&2){let e,n=m().$implicit;a(2),c("ngForOf",(e=n.get("photos"))==null?null:e.value)}}function Pe(o,t){if(o&1&&(s(0,"div",52),l(1),r()),o&2){let e=m().index,n=m(2);a(),_(" ",n.getPlaceFieldError(e,"description")," ")}}function Ce(o,t){if(o&1){let e=P();s(0,"div",53)(1,"div",54)(2,"h6",55),p(3,"i",56),l(4),r(),f(5,le,2,0,"button",57),r(),s(6,"div",58)(7,"div",59)(8,"label",60),l(9,"Place Name *"),r(),p(10,"input",61),f(11,ce,2,1,"div",31),r(),s(12,"div",59)(13,"label",60),l(14,"Address *"),r(),s(15,"div",62)(16,"input",63),v("input",function(i){let d=g(e).index,u=m(2);return b(u.onAddressInput(i,d))})("focus",function(){let i=g(e).index,d=m(2);return b(d.onAddressFocus(i))})("blur",function(){let i=g(e).index,d=m(2);return b(d.onAddressBlur(i))})("keydown",function(i){let d=g(e).index,u=m(2);return b(u.onAddressKeydown(i,d))}),r(),f(17,pe,2,1,"div",64)(18,ue,4,0,"div",65),r(),f(19,fe,2,1,"div",31)(20,_e,6,1,"div",66),r(),s(21,"div",67)(22,"label",60),l(23,"Start Date *"),r(),p(24,"input",68),f(25,ge,2,1,"div",31),r(),s(26,"div",67)(27,"label",60),l(28,"End Date *"),r(),p(29,"input",69),f(30,be,2,1,"div",31),r(),s(31,"div",67)(32,"label",70),l(33,"Duration"),r(),s(34,"div",71),p(35,"i",72),l(36),r()(),s(37,"div",59)(38,"label",60),l(39,"Cost (Optional)"),r(),s(40,"div",73)(41,"span",74),l(42,"$"),r(),p(43,"input",75),r(),f(44,he,2,1,"div",31),r(),s(45,"div",59)(46,"label",60),l(47,"Photos (Optional)"),r(),s(48,"input",76),v("change",function(i){let d=g(e).index,u=m(2);return b(u.onFileSelect(i,d))}),r(),s(49,"small",77),l(50,"Select multiple images"),r(),f(51,xe,3,1,"div",66),r(),s(52,"div",78)(53,"label",60),l(54,"Description *"),r(),p(55,"textarea",79),f(56,Pe,2,1,"div",31),r(),s(57,"div",78)(58,"label",60),l(59,"Personal Notes (Optional)"),r(),p(60,"textarea",80),r()()()}if(o&2){let e,n=t.$implicit,i=t.index,d=m(2);c("formGroupName",i),a(4),_("Place ",i+1," "),a(),c("ngIf",d.places.length>1),a(3),c("for","placeName"+i),a(2),x("is-invalid",d.isPlaceFieldInvalid(i,"name")),c("id","placeName"+i),a(),c("ngIf",d.isPlaceFieldInvalid(i,"name")),a(2),c("for","placeAddress"+i),a(3),x("is-invalid",d.isPlaceFieldInvalid(i,"address")),c("id","placeAddress"+i),a(),c("ngIf",d.showAutocomplete[i]&&(d.addressPredictions[i]==null?null:d.addressPredictions[i].length)>0),a(),c("ngIf",d.isLoadingPredictions[i]),a(),c("ngIf",d.isPlaceFieldInvalid(i,"address")),a(),c("ngIf",d.selectedAddresses[i]),a(2),c("for","startDate"+i),a(2),x("is-invalid",d.isPlaceFieldInvalid(i,"startDate")),c("id","startDate"+i),a(),c("ngIf",d.isPlaceFieldInvalid(i,"startDate")),a(2),c("for","endDate"+i),a(2),x("is-invalid",d.isPlaceFieldInvalid(i,"endDate")),c("id","endDate"+i),a(),c("ngIf",d.isPlaceFieldInvalid(i,"endDate")),a(6),_(" ",d.getDurationDisplay(i)||"Select dates"," "),a(2),c("for","cost"+i),a(5),x("is-invalid",d.isPlaceFieldInvalid(i,"cost")),c("id","cost"+i),a(),c("ngIf",d.isPlaceFieldInvalid(i,"cost")),a(2),c("for","photos"+i),a(2),c("id","photos"+i),a(3),c("ngIf",((e=n.get("photos"))==null||e.value==null?null:e.value.length)>0),a(2),c("for","placeDescription"+i),a(2),x("is-invalid",d.isPlaceFieldInvalid(i,"description")),c("id","placeDescription"+i),a(),c("ngIf",d.isPlaceFieldInvalid(i,"description")),a(2),c("for","notes"+i),a(2),c("id","notes"+i)}}function ye(o,t){o&1&&(s(0,"div",98),p(1,"i",16),l(2," At least one place is required for your trip. "),r())}function we(o,t){o&1&&p(0,"span",99)}function Te(o,t){o&1&&p(0,"i",100)}function Se(o,t){if(o&1){let e=P();s(0,"form",22),v("ngSubmit",function(){g(e);let i=m();return b(i.onSubmit())}),s(1,"div",23)(2,"div",24)(3,"h5",25),p(4,"i",26),l(5,"Trip Information "),r()(),s(6,"div",27)(7,"div",28)(8,"label",29),l(9,"Trip Name *"),r(),p(10,"input",30),f(11,se,2,1,"div",31),r(),s(12,"div",28)(13,"label",32),l(14,"Description *"),r(),p(15,"textarea",33),f(16,de,2,1,"div",31),r(),s(17,"div",34),p(18,"input",35),s(19,"label",36),p(20,"i",37),l(21,"Make this trip public "),r(),s(22,"small",38),l(23," Public trips can be viewed by other users "),r()()()(),s(24,"div",23)(25,"div",39)(26,"h5",25),p(27,"i",40),l(28,"Places to Visit "),r(),s(29,"button",41),v("click",function(){g(e);let i=m();return b(i.addPlace())}),p(30,"i",42),l(31,"Add Place "),r()(),s(32,"div",27)(33,"div",43),f(34,Ce,61,42,"div",44),r(),f(35,ye,3,0,"div",45),r()(),s(36,"div",46)(37,"div",47)(38,"button",48),v("click",function(){g(e);let i=m();return b(i.onCancel())}),p(39,"i",7),l(40,"Cancel "),r(),s(41,"button",49),f(42,we,1,0,"span",50)(43,Te,1,0,"i",51),l(44),r()()()()}if(o&2){let e=m();c("formGroup",e.addTripForm),a(10),x("is-invalid",e.isFieldInvalid("name")),a(),c("ngIf",e.isFieldInvalid("name")),a(4),x("is-invalid",e.isFieldInvalid("description")),a(),c("ngIf",e.isFieldInvalid("description")),a(18),c("ngForOf",e.places.controls),a(),c("ngIf",e.places.invalid&&e.places.touched),a(6),c("disabled",e.isSubmitting||e.addTripForm.invalid),a(),c("ngIf",e.isSubmitting),a(),c("ngIf",!e.isSubmitting),a(),_(" ",e.isSubmitting?"Creating Trip...":"Create Trip"," ")}}var ie=class o{constructor(t,e,n,i,d){this.fb=t;this.router=e;this.tripProxy=n;this.authService=i;this.placesService=d;this.addTripForm=this.createForm()}addTripForm;isSubmitting=!1;submitError="";submitSuccess=!1;isAuthenticated=!1;currentUser=null;authSubscriptions=[];addressPredictions={};selectedAddresses={};showAutocomplete={};isLoadingPredictions={};selectedPredictionIndex={};addressInputSubjects={};destroy$=new T;autocompleteTimeouts={};ngOnInit(){console.log("AddTripComponent initialized"),this.initializeAutocompleteForPlace(0);let t=this.authService.isAuthenticated$.subscribe(n=>{this.isAuthenticated=n,console.log("Authentication status in AddTripComponent:",n),n||(console.log("User not authenticated, redirecting to trips page"),alert("Please sign in to add a new trip."),this.router.navigate(["/trips"]))});this.authSubscriptions.push(t);let e=this.authService.currentUser$.subscribe(n=>{this.currentUser=n,console.log("Current user in AddTripComponent:",n)});this.authSubscriptions.push(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),Object.values(this.autocompleteTimeouts).forEach(t=>{t&&clearTimeout(t)}),this.authSubscriptions.forEach(t=>t.unsubscribe())}createForm(){return this.fb.group({name:["",[h.required,h.minLength(3)]],description:["",[h.required,h.minLength(10)]],isPublic:[!1],places:this.fb.array([this.createPlaceForm()],[h.minLength(1)])})}createPlaceForm(){return this.fb.group({name:["",[h.required,h.minLength(2)]],address:["",[h.required]],description:["",[h.required,h.minLength(5)]],startDate:["",[h.required]],endDate:["",[h.required]],notes:[""],cost:[0,[h.min(0)]],photos:[[]]},{validators:this.dateRangeValidator})}dateRangeValidator(t){let e=t.get("startDate"),n=t.get("endDate");if(e&&n&&e.value&&n.value){let i=new Date(e.value);if(new Date(n.value)<i)return{dateRange:!0}}return null}get places(){return this.addTripForm.get("places")}calculateDuration(t){let e=t.get("startDate").value,n=t.get("endDate").value;if(e&&n){let i=new Date(e),d=new Date(n),u=Math.abs(d.getTime()-i.getTime());return Math.ceil(u/(1e3*60*60*24))}return 0}getDurationDisplay(t){let e=this.places.at(t),n=this.calculateDuration(e);return n>0?`${n} day${n!==1?"s":""}`:""}addPlace(){let t=this.places.length;this.places.push(this.createPlaceForm()),this.initializeAutocompleteForPlace(t)}removePlace(t){this.places.length>1&&(this.places.removeAt(t),this.cleanupAutocompleteForPlace(t))}onFileSelect(t,e){let n=t.target.files;if(n){let i=this.places.at(e),u=[...i.get("photos")?.value||[],...Array.from(n)];i.get("photos")?.setValue(u)}}removePhoto(t,e){let n=this.places.at(t),i=n.get("photos")?.value||[];i.splice(e,1),n.get("photos")?.setValue(i)}getPhotoName(t){return t.name}onSubmit(){if(this.addTripForm.valid&&!this.isSubmitting){this.isSubmitting=!0,this.submitError="",this.submitSuccess=!1;let t=this.addTripForm.value;this.processAllPhotos(t.places).then(e=>{let n={name:t.name,description:t.description,isPublic:t.isPublic,userId:this.currentUser?._id||this.currentUser?.userId||null,places:e.map((i,d)=>({name:i.name,address:this.selectedAddresses[d]?this.selectedAddresses[d]:S.normalizeAddressForApi(i.address),description:i.description,startDate:new Date(i.startDate),endDate:new Date(i.endDate),duration:this.calculateDuration(this.places.at(d)),notes:i.notes||"",cost:i.cost||0,photos:i.photos}))};console.log("Submitting trip data:",n),console.log("Current user information:",this.currentUser),this.tripProxy.createTripWithPlaces(n).subscribe({next:i=>{console.log("Trip created successfully:",i),this.isSubmitting=!1,this.submitSuccess=!0,setTimeout(()=>{this.router.navigate(["/trips"])},2e3)},error:i=>{console.error("Error creating trip:",i),this.isSubmitting=!1,this.submitError="Failed to create trip. Please try again."}})}).catch(e=>{console.error("Error processing photos:",e),this.isSubmitting=!1,this.submitError="Failed to process photos. Please try again."})}else this.markFormGroupTouched(this.addTripForm)}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let n=t.get(e);n instanceof z||n instanceof Q?this.markFormGroupTouched(n):n?.markAsTouched()})}onCancel(){this.router.navigate(["/trips"])}isFieldInvalid(t){let e=this.addTripForm.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched))}isPlaceFieldInvalid(t,e){let i=this.places.at(t)?.get(e);return!!(i&&i.invalid&&(i.dirty||i.touched))}getFieldError(t){let e=this.addTripForm.get(t);if(e?.errors){if(e.errors.required)return`${t} is required`;if(e.errors.minlength)return`${t} is too short`}return""}getPlaceFieldError(t,e){let n=this.places.at(t),i=n?.get(e);if(i?.errors){if(i.errors.required)return`${e} is required`;if(i.errors.minlength)return`${e} is too short`;if(i.errors.min)return`${e} cannot be negative`}return n?.errors?.dateRange&&(e==="startDate"||e==="endDate")?"End date must be after start date":""}processAllPhotos(t){return y(this,null,function*(){let e=[];for(let n of t){let i=yield this.processPhotos(n.photos||[]);e.push(E(A({},n),{photos:i}))}return e})}processPhotos(t){return y(this,null,function*(){if(!t||t.length===0)return[];let e=t.map(n=>new Promise((i,d)=>{let u=new FileReader;u.onload=()=>{u.result?i(u.result):d(new Error("Failed to read file"))},u.onerror=()=>d(new Error("Error reading file")),u.readAsDataURL(n)}));try{return yield Promise.all(e)}catch(n){throw console.error("Error processing photos:",n),n}})}initializeAutocompleteForPlace(t){this.addressPredictions[t]=[],this.selectedAddresses[t]=null,this.showAutocomplete[t]=!1,this.isLoadingPredictions[t]=!1,this.selectedPredictionIndex[t]=-1,this.addressInputSubjects[t]=new T,this.addressInputSubjects[t].pipe(F(300),O(),D(this.destroy$)).subscribe(e=>{this.searchAddresses(t,e)})}cleanupAutocompleteForPlace(t){delete this.addressPredictions[t],delete this.selectedAddresses[t],delete this.showAutocomplete[t],delete this.isLoadingPredictions[t],delete this.selectedPredictionIndex[t],this.addressInputSubjects[t]&&(this.addressInputSubjects[t].complete(),delete this.addressInputSubjects[t]),this.autocompleteTimeouts[t]&&(clearTimeout(this.autocompleteTimeouts[t]),delete this.autocompleteTimeouts[t])}onAddressInput(t,e){let n=t.target.value;this.addressInputSubjects[e]&&this.addressInputSubjects[e].next(n),n.length<2&&this.hideAutocomplete(e)}onAddressFocus(t){let n=this.places.at(t)?.get("address")?.value;n&&n.length>=2&&(this.showAutocomplete[t]=!0)}onAddressBlur(t){this.autocompleteTimeouts[t]=setTimeout(()=>{this.hideAutocomplete(t)},300)}searchAddresses(t,e){return y(this,null,function*(){if(!e||e.length<2){this.hideAutocomplete(t);return}this.isLoadingPredictions[t]=!0;try{let n=yield this.placesService.getPlacePredictions(e);this.addressPredictions[t]=n,this.selectedPredictionIndex[t]=-1,this.showAutocomplete[t]=n.length>0}catch(n){console.error("Error fetching address predictions:",n),this.addressPredictions[t]=[],this.showAutocomplete[t]=!1}finally{this.isLoadingPredictions[t]=!1}})}selectPrediction(t,e){return y(this,null,function*(){this.autocompleteTimeouts[t]&&clearTimeout(this.autocompleteTimeouts[t]),this.places.at(t)?.get("address")?.setValue(e.description);try{let i=yield this.placesService.getPlaceDetails(e.place_id);if(i){let d=this.placesService.convertPlaceToAddress(i);this.selectedAddresses[t]=S.fromGooglePlace(d),console.log("Selected address details for place",t,":",this.selectedAddresses[t])}}catch(i){console.error("Error getting place details:",i)}this.hideAutocomplete(t)})}hideAutocomplete(t){this.showAutocomplete[t]=!1,this.addressPredictions[t]=[],this.selectedPredictionIndex[t]=-1}onAddressKeydown(t,e){if(!(!this.showAutocomplete[e]||!this.addressPredictions[e]||this.addressPredictions[e].length===0))switch(t.key){case"ArrowDown":t.preventDefault(),this.selectedPredictionIndex[e]=Math.min(this.selectedPredictionIndex[e]+1,this.addressPredictions[e].length-1);break;case"ArrowUp":t.preventDefault(),this.selectedPredictionIndex[e]=Math.max(this.selectedPredictionIndex[e]-1,-1);break;case"Enter":t.preventDefault(),this.selectedPredictionIndex[e]>=0&&this.selectedPredictionIndex[e]<this.addressPredictions[e].length&&this.selectPrediction(e,this.addressPredictions[e][this.selectedPredictionIndex[e]]);break;case"Escape":this.hideAutocomplete(e);break}}static \u0275fac=function(e){return new(e||o)(C(X),C(j),C(ee),C(G),C(te))};static \u0275cmp=k({type:o,selectors:[["app-add-trip"]],decls:15,vars:5,consts:[[1,"container-fluid","py-4"],[1,"row","justify-content-center"],[1,"col-lg-8","col-xl-6"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0","text-primary"],[1,"fas","fa-plus-circle","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times","me-2"],["class","alert alert-info mb-4",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-info","mb-4"],[1,"fas","fa-user-circle","me-2"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-triangle","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["novalidate","",3,"ngSubmit","formGroup"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-info-circle","me-2"],[1,"card-body"],[1,"mb-3"],["for","tripName",1,"form-label","fw-bold"],["type","text","id","tripName","formControlName","name","placeholder","e.g., Summer Vacation 2025",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","tripDescription",1,"form-label","fw-bold"],["id","tripDescription","rows","3","formControlName","description","placeholder","Describe your trip...",1,"form-control"],[1,"form-check"],["type","checkbox","id","isPublic","formControlName","isPublic",1,"form-check-input"],["for","isPublic",1,"form-check-label"],[1,"fas","fa-globe","me-2"],[1,"form-text","text-muted","d-block","mt-1"],[1,"card-header","bg-success","text-white","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-map-marker-alt","me-2"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,"fas","fa-plus","me-1"],["formArrayName","places"],["class","place-form mb-4 p-3 border rounded bg-light",3,"formGroupName",4,"ngFor","ngForOf"],["class","alert alert-warning",4,"ngIf"],[1,"card","shadow-sm"],[1,"card-body","d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary","btn-lg",3,"click"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],["class","fas fa-save me-2",4,"ngIf"],[1,"invalid-feedback"],[1,"place-form","mb-4","p-3","border","rounded","bg-light",3,"formGroupName"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0","text-success"],[1,"fas","fa-map-pin","me-2"],["type","button","class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold",3,"for"],["type","text","formControlName","name","placeholder","e.g., Eiffel Tower",1,"form-control",3,"id"],[1,"position-relative"],["type","text","formControlName","address","placeholder","Start typing an address...","autocomplete","off",1,"form-control",3,"input","focus","blur","keydown","id"],["class","autocomplete-dropdown position-absolute w-100 bg-white border border-top-0 shadow-sm","style","z-index: 1050; max-height: 300px; overflow-y: auto;",4,"ngIf"],["class","position-absolute end-0 top-50 translate-middle-y me-2",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-md-4","mb-3"],["type","date","formControlName","startDate",1,"form-control",3,"id"],["type","date","formControlName","endDate",1,"form-control",3,"id"],[1,"form-label","fw-bold"],[1,"form-control-plaintext","fw-bold","text-primary"],[1,"fas","fa-calendar-day","me-2"],[1,"input-group"],[1,"input-group-text"],["type","number","formControlName","cost","min","0","step","0.01","placeholder","0.00",1,"form-control",3,"id"],["type","file","multiple","","accept","image/*",1,"form-control",3,"change","id"],[1,"form-text","text-muted"],[1,"col-12","mb-3"],["rows","2","formControlName","description","placeholder","What will you do here?",1,"form-control",3,"id"],["rows","2","formControlName","notes","placeholder","Personal reminders, tips, etc.",1,"form-control",3,"id"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"autocomplete-dropdown","position-absolute","w-100","bg-white","border","border-top-0","shadow-sm",2,"z-index","1050","max-height","300px","overflow-y","auto"],["class","autocomplete-item p-3 border-bottom cursor-pointer","style","cursor: pointer;",3,"active","mousedown","mouseenter",4,"ngFor","ngForOf"],[1,"autocomplete-item","p-3","border-bottom","cursor-pointer",2,"cursor","pointer",3,"mousedown","mouseenter"],[1,"fw-bold","text-dark"],[1,"text-muted","small"],[1,"position-absolute","end-0","top-50","translate-middle-y","me-2"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"alert","alert-success","py-2"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-secondary d-flex align-items-center",4,"ngFor","ngForOf"],[1,"badge","bg-secondary","d-flex","align-items-center"],[1,"fas","fa-image","me-1"],["type","button",1,"btn-close","btn-close-white","ms-2",2,"font-size","0.7em",3,"click"],[1,"alert","alert-warning"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),p(5,"i",5),l(6,"Add New Trip "),r(),s(7,"button",6),v("click",function(){return n.onCancel()}),p(8,"i",7),l(9,"Cancel "),r()(),f(10,ne,6,2,"div",8)(11,re,5,0,"div",9)(12,oe,5,0,"div",10)(13,ae,6,1,"div",11)(14,Se,45,13,"form",12),r()()()),e&2&&(a(10),c("ngIf",n.isAuthenticated&&n.currentUser),a(),c("ngIf",!n.isAuthenticated),a(),c("ngIf",n.submitSuccess),a(),c("ngIf",n.submitError),a(),c("ngIf",n.isAuthenticated))},dependencies:[V,M,I,Z,q,U,Y,$,L,R,J,B,W,K,H,N],styles:[".container-fluid[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a!important}.card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0!important;border:none;padding:1rem 1.5rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:.75rem 1rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40;transform:translateY(-1px)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.place-form[_ngcontent-%COMP%]{background:#fff!important;border:2px dashed #28a745!important;border-radius:12px;position:relative;transition:all .3s ease}.place-form[_ngcontent-%COMP%]:hover{border-color:#1e7e34!important;background:#f8fff9!important}.btn[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0003}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);border:none}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#1e7e34);border:none}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#dc3545,#c82333)}.btn-lg[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.1rem}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:8px 0 0 8px;font-weight:600}.alert[_ngcontent-%COMP%]{border-radius:10px;border:none;padding:1rem 1.5rem;margin-bottom:1.5rem}.alert-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#d4edda,#c3e6cb);color:#155724}.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f8d7da,#f5c6cb);color:#721c24}.alert-warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fff3cd,#ffeaa7);color:#856404}.form-control-plaintext[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:.75rem 1rem;margin:0;border:2px solid #e9ecef}.badge[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:6px;font-size:.85rem}.form-check[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:8px;border:2px solid #e9ecef;transition:all .3s ease}.form-check[_ngcontent-%COMP%]:hover{background:#e9ecef}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#28a745;border-color:#28a745}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}h2[_ngcontent-%COMP%]{font-weight:700;color:#343a40}h5[_ngcontent-%COMP%]{font-weight:600}h6[_ngcontent-%COMP%]{font-weight:600;color:#28a745}.fas[_ngcontent-%COMP%]{color:inherit}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}.place-form[_ngcontent-%COMP%]{padding:1rem!important}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}.col-md-4[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%]{margin-bottom:1rem}}input[type=file][_ngcontent-%COMP%]{border:2px dashed #6c757d;background:#f8f9fa}input[type=file][_ngcontent-%COMP%]:focus{border-color:#007bff;background:#fff}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545;font-weight:500}.text-primary[_ngcontent-%COMP%]{color:#007bff!important}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.place-form[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.place-form[_ngcontent-%COMP%]:hover   .btn-outline-danger[_ngcontent-%COMP%]{opacity:1}.btn[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff40}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:none}.autocomplete-dropdown[_ngcontent-%COMP%]{border-radius:0 0 8px 8px;box-shadow:0 4px 6px #0000001a}.autocomplete-item[_ngcontent-%COMP%]{transition:background-color .2s ease}.autocomplete-item[_ngcontent-%COMP%]:hover, .autocomplete-item.active[_ngcontent-%COMP%]{background-color:#f8f9fa}.autocomplete-item[_ngcontent-%COMP%]:last-child{border-bottom:none;border-radius:0 0 8px 8px}.position-relative[_ngcontent-%COMP%]{position:relative}"]})};export{ie as AddTripComponent};
